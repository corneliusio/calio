var Calio=function(){"use strict";function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],s=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){a=!0,n=e}finally{try{s||null==o.return||o.return()}finally{if(a)throw n}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function t(){}function i(e,t){for(var i in t)e[i]=t[i];return e}function s(e,t){for(var i in t)e[i]=1;return e}function a(e,t){t.appendChild(e)}function n(e,t,i){t.insertBefore(e,i)}function r(e){e.parentNode.removeChild(e)}function o(e,t){for(var i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function l(e){return document.createElement(e)}function c(e){return document.createTextNode(e)}function d(e,t){e._handlers=Object.create(null),e._bind=t._bind,e.options=t,e.root=t.root||e,e.store=e.root.store||t.store}function h(e){for(;e&&e.length;)e.shift()()}var u={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(e,t){var i=e in this._handlers&&this._handlers[e].slice();if(i)for(var s=0;s<i.length;s+=1){var a=i[s];a.__calling||(a.__calling=!0,a.call(this,t),a.__calling=!1)}},on:function(e,t){var i=this._handlers[e]||(this._handlers[e]=[]);return i.push(t),{cancel:function(){var e=i.indexOf(t);~e&&i.splice(e,1)}}},set:function(e){this._set(i({},e)),this.root._lock||(this.root._lock=!0,h(this.root._beforecreate),h(this.root._oncreate),h(this.root._aftercreate),this.root._lock=!1)},_recompute:t,_set:function(e){var t=this._state,s={},a=!1;for(var n in e)this._differs(e[n],t[n])&&(s[n]=a=!0);a&&(this._state=i(i({},t),e),this._recompute(s,this._state),this._bind&&this._bind(s,this._state),this._fragment&&(this.fire("state",{changed:s,current:this._state,previous:t}),this._fragment.p(s,this._state),this.fire("update",{changed:s,current:this._state,previous:t})))},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:function(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}};const m=/d{1,4}|m{1,4}|yy(?:yy)?|([HhsTt])\1?|[LloS]|"[^"]*"|'[^']*'/g,f={masks:{default:"ddd mmm dd yyyy 00:00:00",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",isoDate:"yyyy-mm-dd",isoDateTime:"yyyy-mm-dd'T'00:00:00",isoUtcDateTime:"yyyy-mm-dd'T'00:00:00'Z'"},i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}};function y(e,t=2){for(e=`${e}`;e.length<t;)e=`0${e}`;return e}class v{constructor(...e){const t=e[0],i=e[1],s=e[2];e.length>1?this.value=new Date(t,i,s||1):t instanceof v?this.value=t.clone().value:t instanceof Date?this.value=t:["number","string"].includes(typeof t)?this.value=new Date(t):this.value=new Date,this.value.setUTCHours(0),this.value.setUTCMinutes(0),this.value.setUTCSeconds(0),this.value.setUTCMilliseconds(0)}year(e=null){return null!==e?(this.value.setUTCFullYear(e),this):this.value.getUTCFullYear()}month(e=null){return null!==e?(this.value.setUTCMonth(e),this):this.value.getUTCMonth()}date(e=null){return null!==e?(this.value.setUTCDate(e),this):this.value.getUTCDate()}addDay(e=1){return this.date(this.date()+e),this}addMonth(e=1){return this.month(this.month()+e),this}addYear(e=1){return this.year(this.year()+e),this}subDay(e=1){return this.date(this.date()-e),this}subMonth(e=1){return this.month(this.month()-e),this}subYear(e=1){return this.year(this.year()-e),this}dayOfWeek(){return this.value.getUTCDay()}endOfMonth(){return this.addMonth(),this.date(0),this}startOfMonth(){return this.date(1),this}isAfter(e){return this.value>e.value}isBefore(e){return this.value<e.value}isSame(e){return this.year()===e.year()&&this.month()===e.month()&&this.date()===e.date()}isSameMonth(e){return this.year()===e.year()&&this.month()===e.month()}isSameYear(e){return this.year()===e.year()}timestamp(){return this.value.getTime()}format(e){return function(e,t="default"){"object"==typeof e&&"timestamp"in e&&(e=e.timestamp()),e=e instanceof Date?e:new Date(e),t=`${f.masks[t]||t||f.masks.default}`;let i=e.getUTCDate(),s=e.getUTCDay(),a=e.getUTCMonth(),n=e.getUTCFullYear(),r={d:i,dd:y(i),ddd:f.i18n.dayNames[s],dddd:f.i18n.dayNames[s+7],m:a+1,mm:y(a+1),mmm:f.i18n.monthNames[a],mmmm:f.i18n.monthNames[a+12],yy:String(n).slice(2),yyyy:n,S:["th","st","nd","rd"][i%10>3?0:(i%100-i%10!=10)*i%10]};return t.replace(m,e=>e in r?r[e]:e.slice(1,e.length-1))}(this.timestamp(),e)}clone(){return new v(this.timestamp())}toString(){return this.value.toString()}}const g=new v;function p(e){var t;d(this,e),this._state=i({},e.data),this._recompute({props:1,day:1,isActive:1,isDisabled:1,isRanged:1},this._state),document.getElementById("svelte-1mp2c5z-style")||((t=l("style")).id="svelte-1mp2c5z-style",t.textContent=".calio-day.svelte-1mp2c5z{cursor:pointer;color:var(--color, #333)}.calio-day.svelte-1mp2c5z:hover{color:var(--color-hover, var(--color, #333));background:var(--bg-hover, #EEE)}.calio-day.is-today.svelte-1mp2c5z{font-weight:900}.calio-day.is-prev.svelte-1mp2c5z,.calio-day.is-next.svelte-1mp2c5z{color:var(--color-inactive, #CCC);background:var(--bg-inactive, transparent)}.calio-day.is-disabled.svelte-1mp2c5z{pointer-events:none;color:var(--color-disabled, var(--color-inactive, #CCC));background:var(--bg-disabled, transparent);opacity:var(--opacity-disabled, 0.5)}.calio-day.is-ranged.svelte-1mp2c5z{color:var(--color-ranged, var(--color-active, white));background:var(--bg-ranged, var(--bg-active, rgba(100, 149, 237, 0.66)))}.calio-day.is-active.svelte-1mp2c5z{color:var(--color-active, white);background:var(--bg-active, rgb(100, 149, 237))}",a(t,document.head)),this._fragment=function(e,t){var i,s,o,d=t.day.date();function h(i){e.fire("select",t.day)}return{c(){var e,a;i=l("span"),s=c(d),e="click",a=h,i.addEventListener(e,a,!1),i.className=o="calio-day "+t.classes+" svelte-1mp2c5z"},m(e,t){n(i,e,t),a(s,i)},p(e,a){t=a,e.day&&d!==(d=t.day.date())&&(s.data=d),e.classes&&o!==(o="calio-day "+t.classes+" svelte-1mp2c5z")&&(i.className=o)},d(e){var t,s;e&&r(i),t="click",s=h,i.removeEventListener(t,s,!1)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}i(p.prototype,u),p.prototype._recompute=function(t,i){(t.props||t.day)&&(this._differs(i.isActive,i.isActive=function({props:{selection:e},day:t}){return(e=(new Array).concat(e).filter(Boolean)).find(e=>t.isSame(e))}(i))&&(t.isActive=!0),this._differs(i.isDisabled,i.isDisabled=function({props:{min:e,max:t,disabled:i},day:s}){return i.find(e=>e.isSame&&e.isSame(s))||e&&s.isBefore(e)||t&&s.isAfter(t)}(i))&&(t.isDisabled=!0),this._differs(i.isRanged,i.isRanged=function({props:{selection:t,mode:i},day:s}){if("range"===i&&t){let i=e(t,2),a=i[0],n=i[1];if(a&&n)return s.isAfter(a)&&s.isBefore(n)}return!1}(i))&&(t.isRanged=!0)),(t.props||t.day||t.isActive||t.isDisabled||t.isRanged)&&this._differs(i.classes,i.classes=function({props:{view:e},day:t,isActive:i,isDisabled:s,isRanged:a}){return[t.isSame(g)&&"is-today",e.endOfMonth().isBefore(t)&&"is-next",e.startOfMonth().isAfter(t)&&"is-prev",s&&"is-disabled",a&&"is-ranged",i&&"is-active"].filter(Boolean).join(" ")}(i))&&(t.classes=!0)};const _=new v;var b={makeMyDay:(e=null)=>e?e instanceof v?e:Array.isArray(e)?new v(...e):new v(e):null,select(e){const t=this.get(),i=t.mode,s=t.disabled,a=t.min,n=t.max;if(e=this.makeMyDay(e)){if(s.find(t=>t.isSame(e))||a&&e.isBefore(a)||n&&e.isAfter(n))return;switch(i){case"range":this.updateRange(e);break;case"multi":this.updateMulti(e);break;default:this.updateSingle(e)}}},updateRange(t){let i,s=this.get(),a=s.selection,n=s.disabled,r=s.strict;if((i=(a=a||[]).findIndex(e=>e.isSame(t)))>-1)a.splice(i,1),this.set({selection:a});else if(a.length>1)this.set({selection:[t.clone()]});else{if(a=(a=[...a,t.clone()]).sort((e,t)=>e.timestamp()-t.timestamp()),r){let t=e(a,2),i=t[0],s=t[1];if(s&&!!n.find(e=>e.isAfter(i)&&e.isBefore(s)))return}this.set({selection:a})}},updateMulti(e){let t,i=this.get(),s=i.selection,a=i.limit;(t=(s=s||[]).findIndex(t=>t.isSame(e)))>-1?(s.splice(t,1),this.set({selection:s})):(!a||s.length<a)&&this.set({selection:[...s,e.clone()].sort((e,t)=>e.timestamp()-t.timestamp())})},updateSingle(e){this.set({selection:e.clone()})},goToYear(e){const t=this.get().view;this.set({view:t.clone().year(e)})},goToNextYear(){const e=this.get().view;this.set({view:e.clone().addYear()})},goToLastYear(){const e=this.get().view;this.set({view:e.clone().subYear()})},goToMonth(e){const t=this.get().view;this.set({view:t.clone().date(1).month(e-1)})},goToNextMonth(){const e=this.get().view;this.set({view:e.clone().date(1).addMonth()})},goToLastMonth(){const e=this.get().view;this.set({view:e.clone().date(1).subMonth()})},goToThisMonth(){this.set({view:_.clone()})},goToSelection(){const e=this.get(),t=e.selection;"single"===e.mode&&t&&this.set({view:t.clone()})},goTo(e){(e=this.makeMyDay(e))&&this.set({view:e.clone()})}};function w({changed:e,previous:t,current:{mode:i,view:s,value:a,selection:n,disabled:r}}){if(e.view&&this.fire("view",s.clone().date(1)),t&&n&&e.selection&&("single"===i?(this.fire("select",n.clone()),n.isSameMonth(s)||(s=n.clone(),this.set({view:s}),this.fire("view",s.clone().date(1)))):this.fire("select",n.map(e=>e.clone()))),t&&e.value){const e=this.makeMyDay(a);s=e.clone(),this.set({view:s,selection:e}),this.fire("view",s.clone().date(1))}}function M(e,t){var i,s,o=t.day;return{c(){i=l("span"),s=c(o),i.className="calio-head svelte-ui4b82"},m(e,t){n(i,e,t),a(s,i)},p(e,t){e.head&&o!==(o=t.day)&&(s.data=o)},d(e){e&&r(i)}}}function T(e,t){var i={day:t.day,props:t.props},s=new p({root:e.root,data:i});return s.on("select",function(i){e.select(t.day)}),{c(){s._fragment.c()},m(e,t){s._mount(e,t)},p(e,i){t=i;var a={};e.dates&&(a.day=t.day),e.props&&(a.props=t.props),s._set(a)},d(e){s.destroy(e)}}}function D(e,t,i){const s=Object.create(e);return s.day=t[i],s.each_value=t,s.day_index=i,s}function S(e,t,i){const s=Object.create(e);return s.day=t[i],s.each_value_1=t,s.day_index_1=i,s}function k(e){var t;d(this,e),this._state=i({headers:["Su","Mo","Tu","We","Th","Fr","Sa"],view:new v,mode:"single",strict:!1,disabled:[],selection:null,value:null,limit:null,min:null,max:null},e.data),this._recompute({selection:1,mode:1,view:1,disabled:1,min:1,max:1,headers:1},this._state),this._handlers.state=[w],document.getElementById("svelte-ui4b82-style")||((t=l("style")).id="svelte-ui4b82-style",t.textContent=".calio.svelte-ui4b82{display:-ms-inline-grid;display:inline-grid;-ms-grid-columns:(var(--size-x, var(--size, 2.25em)))[7];grid-template-columns:repeat(7, var(--size-x, var(--size, 2.25em)));grid-auto-rows:var(--size-y, var(--size, 2em));line-height:var(--size-y, var(--size, 2em));text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.calio-head.svelte-ui4b82{color:var(--color, #333);font-weight:bold}",a(t,document.head)),e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(e,t){for(var i,s,d=t.head,h=[],u=0;u<d.length;u+=1)h[u]=M(0,D(t,d,u));var m=t.dates,f=[];for(u=0;u<m.length;u+=1)f[u]=T(e,S(t,m,u));return{c(){i=l("div");for(var e=0;e<h.length;e+=1)h[e].c();for(s=c("\n    "),e=0;e<f.length;e+=1)f[e].c();i.className="calio svelte-ui4b82"},m(e,t){n(i,e,t);for(var r=0;r<h.length;r+=1)h[r].m(i,null);for(a(s,i),r=0;r<f.length;r+=1)f[r].m(i,null)},p(t,a){if(t.head){d=a.head;for(var n=0;n<d.length;n+=1){const e=D(a,d,n);h[n]?h[n].p(t,e):(h[n]=M(0,e),h[n].c(),h[n].m(i,s))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}if(t.dates||t.props){for(m=a.dates,n=0;n<m.length;n+=1){const s=S(a,m,n);f[n]?f[n].p(t,s):(f[n]=T(e,s),f[n].c(),f[n].m(i,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=m.length}},d(e){e&&r(i),o(h,e),o(f,e)}}}(this,this._state),this.root._oncreate.push(()=>{w.call(this,{changed:s({},this._state),current:this._state}),function(){const e=this.get(),t=e.value,i=e.min,s=e.max,a=e.disabled;this.set({min:this.makeMyDay(i),max:this.makeMyDay(s),disabled:(new Array).concat(a).filter(Boolean).map(this.makeMyDay)}),(new Array).concat(t).forEach(e=>this.select(e))}.call(this),this.fire("update",{changed:s({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,h(this._beforecreate),h(this._oncreate),h(this._aftercreate),this._lock=!1)}i(k.prototype,u),i(k.prototype,b),k.prototype._recompute=function(e,t){(e.selection||e.mode||e.view||e.disabled||e.min||e.max)&&this._differs(t.props,t.props=function({selection:e,mode:t,view:i,disabled:s,min:a,max:n}){return{selection:e,mode:t,view:i,disabled:s,min:a,max:n}}(t))&&(e.props=!0),e.headers&&this._differs(t.head,t.head=function({headers:e}){return e.length?new Array(7).fill("",0,7).map((t,i)=>e[i]||t):[]}(t))&&(e.head=!0),(e.view||e.disabled)&&this._differs(t.dates,t.dates=function({view:e,disabled:t}){let i,s,a=e.clone().startOfMonth(),n=[];if(!Array.isArray(t))return[];i=a.dayOfWeek();for(let e=0;e<i;e++)n.unshift(a.clone().date(-e));a.endOfMonth();for(let e=1,t=a.date();e<=t;e++)n.push(a.clone().date(e));s=a.dayOfWeek(),a.startOfMonth().addMonth();for(let e=1;e<7-s;e++)n.push(a.clone().date(e));return n}(t))&&(e.dates=!0)};return class{constructor(e,t={}){const i=["headers","mode","disabled","strict","value","limit","min","max"];return new k({target:"string"==typeof e?document.querySelector(e):e,data:Object.keys(t).filter(e=>i.includes(e)).reduce((e,i)=>(e[i]=t[i],e),{})})}}}();
